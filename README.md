STM32 Traffic Light Controller (Bare Metal)

![Language](https://img.shields.io/badge/Language-C-00599C?style=for-the-badge&logo=c&logoColor=white)
![Platform](https://img.shields.io/badge/Platform-STM32F103-03234B?style=for-the-badge&logo=stmicroelectronics&logoColor=white)
![Architecture](https://img.shields.io/badge/Architecture-ARM_Cortex_M3-0091BD?style=for-the-badge&logo=arm&logoColor=white)

–ü—Ä–æ–µ–∫—Ç —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–µ—Ç–æ—Ñ–æ—Ä–æ–º, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ **STM32F103C8T6 (Blue Pill)**.
–ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ **—á–∏—Å—Ç–æ–º C —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ (CMSIS)**, –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫ HAL –∏–ª–∏ SPL, –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã MCU.

---

## üõ† Hardware Manifest (–ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å)

* **MCU:** STM32F103C8T6 "Blue Pill"
* **Debug:** ST-Link V2 (SWD)
* **Clock Speed:** 72 MHz (External Crystal 8 MHz + PLL x9)

### Pinout / –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

| Component | Pin (STM32) | Mode | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| :--- | :--- | :--- | :--- |
| **RED LED** | `PA0` | Output Push-Pull | –ö—Ä–∞—Å–Ω—ã–π —Å–∏–≥–Ω–∞–ª |
| **YELLOW LED** | `PA2` | Output Push-Pull | –ñ–µ–ª—Ç—ã–π —Å–∏–≥–Ω–∞–ª |
| **GREEN LED** | `PA4` | Output Push-Pull | –ó–µ–ª–µ–Ω—ã–π —Å–∏–≥–Ω–∞–ª |
| **BUTTON** | `PA7` | Input Pull-Up | –ö–Ω–æ–ø–∫–∞ –ø–µ—à–µ—Ö–æ–¥–∞ / –°–µ—Ä–≤–∏—Å |

---

## Architecture & Drivers (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏.

### 1. RCC Driver (System Clock)
–î—Ä–∞–π–≤–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –±–∞–∑–æ–≤—ã—Ö 8 –ú–ì—Ü –Ω–∞ –±–æ–µ–≤—ã–µ **72 –ú–ì—Ü**.
* **HSE:** –í–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–≤–∞—Ä—Ü–∞.
* **PLL:** –£–º–Ω–æ–∂–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã (x9).
* **Flash Latency:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–º—è—Ç–∏ (2WS).
* **Bus Prescalers:** APB1 (36 MHz), APB2 (72 MHz).

> **–°–ø—Ä–∞–≤–∫–∞ –ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞–º RCC:**
> * **RCC_CR:** "–ü—É–ª—å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è". –í–∫–ª—é—á–∞–µ—Ç HSE (`HSEON`), PLL (`PLLON`) –∏ –∑–∞—â–∏—Ç—É (`CSSON`). –§–ª–∞–≥–∏ `RDY` —Å–æ–æ–±—â–∞—é—Ç –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.
> * **RCC_CFGR:** "–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è". `PLLSRC` –≤—ã–±–∏—Ä–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫, `PLLMUL` –∑–∞–¥–∞–µ—Ç –º–Ω–æ–∂–∏—Ç–µ–ª—å, `SW/SWS` –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç –ø–∏—Ç–∞–Ω–∏–µ —è–¥—Ä–∞.
> * **RCC_APB2ENR:** –í–∫–ª—é—á–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ (GPIO, ADC, SPI1).

### 2. GPIO Driver
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞–º–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–µ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ `CRL`, `ODR`, `IDR`, `BSRR`.
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ `BSRR` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ Read-Modify-Write.
* –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–ª–æ–∂–µ–Ω–∏—è –º–∞—Å–æ–∫ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤.

### 3. Main Logic (State Machine)
–õ–æ–≥–∏–∫–∞ —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ **–ö–æ–Ω–µ—á–Ω—ã–π –ê–≤—Ç–æ–º–∞—Ç (FSM)**:
* `STATE_RED` ‚ûî `STATE_RED_YELLOW` ‚ûî `STATE_GREEN` ‚ûî `STATE_YELLOW`
* **Maintenance Mode:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º "–ú–∏–≥–∞—é—â–∏–π –∂–µ–ª—Ç—ã–π".

---